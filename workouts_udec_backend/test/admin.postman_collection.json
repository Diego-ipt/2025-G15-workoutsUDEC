{
	"info": {
		"_postman_id": "admin-collection-2024",
		"name": "Workout Tracker API - Admin Tests",
		"description": "Colección completa de tests para endpoints de Administración (User Management y Workout Template Management) con casos positivos, negativos y límite",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. User Management",
			"description": "Tests para gestión de usuarios (solo admin)",
			"item": [
				{
					"name": "Get All Users - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Users have required properties\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        pm.expect(jsonData[0]).to.have.property('id');",
									"        pm.expect(jsonData[0]).to.have.property('email');",
									"        pm.expect(jsonData[0]).to.have.property('username');",
									"        pm.expect(jsonData[0]).to.have.property('is_active');",
									"        pm.expect(jsonData[0]).to.have.property('is_admin');",
									"    }",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Obtener lista de todos los usuarios - Requiere token de admin"
					}
				},
				{
					"name": "Get Users - Sin Autenticación (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403 Forbidden\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Not authenticated');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Intento de acceso sin token de autenticación"
					}
				},
				{
					"name": "Get Users - Paginación (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Array length respects limit parameter\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.at.most(5);",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users?skip=0&limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							],
							"query": [
								{
									"key": "skip",
									"value": "0"
								},
								{
									"key": "limit",
									"value": "5"
								}
							]
						},
						"description": "Test de paginación con límite de 5 usuarios"
					}
				},
				{
					"name": "Create User - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"User created with correct data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('email');",
									"    pm.expect(jsonData).to.have.property('username');",
									"    pm.expect(jsonData.email).to.eql(pm.environment.get('test_user_email'));",
									"    pm.expect(jsonData.username).to.eql(pm.environment.get('test_user_username'));",
									"});",
									"",
									"pm.test(\"User has default properties\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('is_active');",
									"    pm.expect(jsonData).to.have.property('is_admin');",
									"});",
									"",
									"// Guardar ID del usuario para tests posteriores",
									"pm.environment.set('test_user_id', pm.response.json().id);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar email y username únicos",
									"const timestamp = Date.now();",
									"pm.environment.set('test_user_email', `testuser${timestamp}@example.com`);",
									"pm.environment.set('test_user_username', `testuser${timestamp}`);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_user_email}}\",\n    \"username\": \"{{test_user_username}}\",\n    \"password\": \"testpassword123\",\n    \"full_name\": \"Test User\",\n    \"is_active\": true,\n    \"is_admin\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Crear un nuevo usuario - Caso exitoso"
					}
				},
				{
					"name": "Create User - Email Duplicado (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 Bad Request\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('The user with this email already exists in the system.');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_user_email}}\",\n    \"username\": \"differentusername123\",\n    \"password\": \"testpassword123\",\n    \"full_name\": \"Another User\",\n    \"is_active\": true,\n    \"is_admin\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Intentar crear usuario con email duplicado"
					}
				},
				{
					"name": "Create User - Username Duplicado (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 Bad Request\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('The user with this username already exists in the system.');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"anotheremail@example.com\",\n    \"username\": \"{{test_user_username}}\",\n    \"password\": \"testpassword123\",\n    \"full_name\": \"Another User\",\n    \"is_active\": true,\n    \"is_admin\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Intentar crear usuario con username duplicado"
					}
				},
				{
					"name": "Create User - Datos Inválidos (Caso Límite)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 422 Unprocessable Entity\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"Response contains validation errors\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Detail is an array of errors\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.be.an('array');",
									"    pm.expect(jsonData.detail.length).to.be.above(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"not-an-email\",\n    \"username\": \"\",\n    \"password\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						},
						"description": "Crear usuario con datos inválidos - email mal formado, campos vacíos"
					}
				},
				{
					"name": "Update User - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"User data updated correctly\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('full_name');",
									"    pm.expect(jsonData.full_name).to.eql('Updated Test User');",
									"});",
									"",
									"pm.test(\"User ID remains the same\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.eql(parseInt(pm.environment.get('test_user_id')));",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"full_name\": \"Updated Test User\",\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users/{{test_user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"{{test_user_id}}"
							]
						},
						"description": "Actualizar datos de usuario existente"
					}
				},
				{
					"name": "Update User - ID No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('User not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"full_name\": \"This Should Fail\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/users/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"999999"
							]
						},
						"description": "Intentar actualizar usuario que no existe"
					}
				},
				{
					"name": "Delete User - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Success message returned\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.eql('User and all associated data deleted successfully');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users/{{test_user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"{{test_user_id}}"
							]
						},
						"description": "Eliminar usuario con cascada de datos asociados"
					}
				},
				{
					"name": "Delete User - ID No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('User not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"users",
								"999999"
							]
						},
						"description": "Intentar eliminar usuario que no existe"
					}
				}
			]
		},
		{
			"name": "2. Workout Template Management",
			"description": "Tests para gestión de plantillas de entrenamiento",
			"item": [
				{
					"name": "Get All Templates - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Templates have required properties\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        pm.expect(jsonData[0]).to.have.property('id');",
									"        pm.expect(jsonData[0]).to.have.property('name');",
									"        pm.expect(jsonData[0]).to.have.property('description');",
									"        pm.expect(jsonData[0]).to.have.property('created_by');",
									"    }",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates"
							]
						},
						"description": "Obtener todas las plantillas de entrenamiento"
					}
				},
				{
					"name": "Get Templates - Sin Autenticación (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403 Forbidden\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Not authenticated');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates"
							]
						},
						"description": "Intentar acceder sin token de autenticación"
					}
				},
				{
					"name": "Create Template - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Template created with correct data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData).to.have.property('description');",
									"    pm.expect(jsonData.name).to.eql('Test Workout Template');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});",
									"",
									"// Guardar ID del template para tests posteriores",
									"pm.environment.set('test_template_id', pm.response.json().id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Test Workout Template\",\n    \"description\": \"A comprehensive full body workout template for testing\",\n    \"exercises\": []\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates"
							]
						},
						"description": "Crear una nueva plantilla de entrenamiento"
					}
				},
				{
					"name": "Create Template - Datos Inválidos (Caso Límite)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 OK (backend accepts empty strings)\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response contains template with empty name\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('name');",
									"    pm.expect(jsonData.name).to.eql('');",
									"});",
									"",
									"pm.test(\"Response contains template with empty description\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.description).to.eql('');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"\",\n    \"description\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates"
							]
						},
						"description": "Intentar crear template con datos inválidos"
					}
				},
				{
					"name": "Get Template by ID - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Template data is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData.id).to.eql(parseInt(pm.environment.get('test_template_id')));",
									"    pm.expect(jsonData).to.have.property('name');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}"
							]
						},
						"description": "Obtener template específico por ID"
					}
				},
				{
					"name": "Get Template - ID No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Workout template not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"999999"
							]
						},
						"description": "Intentar obtener template que no existe"
					}
				},
				{
					"name": "Update Template - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Template updated correctly\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.name).to.eql('Updated Template Name');",
									"    pm.expect(jsonData.description).to.eql('Updated description for testing purposes');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Template Name\",\n    \"description\": \"Updated description for testing purposes\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}"
							]
						},
						"description": "Actualizar datos de template existente"
					}
				},
				{
					"name": "Update Template - ID No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Workout template not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"This Should Fail\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"999999"
							]
						},
						"description": "Intentar actualizar template que no existe"
					}
				},
				{
					"name": "Add Exercise to Template - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 422\", function () {",
									"    // Puede fallar si exercise_id no existe en DB",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 422]);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    pm.test(\"Exercise added to template\", function () {",
									"        var jsonData = pm.response.json();",
									"        pm.expect(jsonData).to.have.property('id');",
									"        pm.expect(jsonData).to.have.property('exercise_id');",
									"        pm.environment.set('test_template_exercise_id', jsonData.id);",
									"    });",
									"    ",
									"    pm.test(\"Response time is acceptable\", function () {",
									"        pm.expect(pm.response.responseTime).to.be.below(2000);",
									"    });",
									"} else {",
									"    pm.test(\"Validation error expected for invalid exercise_id\", function () {",
									"        pm.expect(pm.response.code).to.eql(422);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"exercise_id\": 1,\n    \"sets\": 3,\n    \"reps\": 10,\n    \"order\": 1,\n    \"notes\": \"Test exercise for template\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}/exercises",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}",
								"exercises"
							]
						},
						"description": "Agregar ejercicio a una plantilla"
					}
				},
				{
					"name": "Add Exercise - Template No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 422 Unprocessable Entity\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"Response contains validation errors\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Detail is an array of errors\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"exercise_id\": 1,\n    \"sets\": 3,\n    \"reps\": 10,\n    \"order\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/999999/exercises",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"999999",
								"exercises"
							]
						},
						"description": "Intentar agregar ejercicio a template que no existe"
					}
				},
				{
					"name": "Remove Exercise from Template - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 422\", function () {",
									"    // Puede ser 422 si el exercise_id no existe",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404, 422]);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    pm.test(\"Success message returned\", function () {",
									"        var jsonData = pm.response.json();",
									"        pm.expect(jsonData).to.have.property('message');",
									"    });",
									"    ",
									"    pm.test(\"Response time is acceptable\", function () {",
									"        pm.expect(pm.response.responseTime).to.be.below(2000);",
									"    });",
									"} else {",
									"    pm.test(\"Error response expected\", function () {",
									"        pm.expect(pm.response.code).to.be.oneOf([404, 422]);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}/exercises/{{test_template_exercise_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}",
								"exercises",
								"{{test_template_exercise_id}}"
							]
						},
						"description": "Eliminar ejercicio de una plantilla"
					}
				},
				{
					"name": "Remove Exercise - No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Template exercise not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}/exercises/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}",
								"exercises",
								"999999"
							]
						},
						"description": "Intentar eliminar ejercicio que no existe"
					}
				},
				{
					"name": "Delete Template - Exitoso (Caso Positivo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Success message returned\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.eql('Workout template deleted successfully');",
									"});",
									"",
									"pm.test(\"Response time is acceptable\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/{{test_template_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"{{test_template_id}}"
							]
						},
						"description": "Eliminar template de entrenamiento"
					}
				},
				{
					"name": "Delete Template - ID No Existe (Caso Negativo)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response contains error detail\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Error message is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.detail).to.eql('Workout template not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/workout-templates/999999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"workout-templates",
								"999999"
							]
						},
						"description": "Intentar eliminar template que no existe"
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8001",
			"type": "string"
		}
	]
}
